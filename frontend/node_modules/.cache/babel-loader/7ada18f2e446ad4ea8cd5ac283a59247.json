{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"E:\\\\IntelliJ\\\\Projects\\\\Restaurant\\\\Vietnamese_Restaurant\\\\frontend\\\\src\\\\components\\\\product\\\\products.component.jsx\";\nimport React, { Component } from \"react\";\nimport authService from \"../../services/auth.service\";\nimport ProductService from \"../../services/product.service\";\nimport categoryService from \"../../services/category.service\";\nimport productService from \"../../services/product.service\";\nexport default class Products extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      products: [],\n      categories: [],\n      categoryId: -1,\n      currentUser: authService.getCurrentUser(),\n      content: '',\n      listCategories: [],\n      listProducts: [],\n      show: false,\n      product_category: []\n    };\n    this.deleteProduct = this.deleteProduct.bind(this);\n  }\n\n  componentDidMount() {\n    ProductService.getAllProducts().then(response => {\n      this.setState({\n        products: response.data.sort((a, b) => a.categoryId - b.categoryId),\n        content: \"Menu\"\n      });\n      categoryService.getAllCategories().then(response => {\n        this.setState({\n          listCategories: response.data\n        });\n        let listProducts = [];\n        this.state.listCategories.forEach(category => {\n          let list = this.state.products;\n          listProducts.push(list.filter(product => product.categoryId === category.id));\n        });\n        this.setState({\n          listProducts: listProducts\n        });\n      }, error => {});\n    }, error => {\n      this.setState({\n        content: error.response && error.response.data && error.response.data.message || error.message || error.toString()\n      });\n    });\n\n    if (this.state.currentUser) {\n      if (this.state.currentUser.roles.includes(\"ROLE_ADMIN\") || this.state.currentUser.roles.includes(\"ROLE_MANAGER\")) this.setState({\n        show: true\n      });\n    }\n\n    productService.getAllProductsByCategory(0).then();\n  }\n\n  updateProduct(id) {\n    this.props.history.push(\"/product/\" + id);\n  }\n\n  deleteProduct(id) {\n    ProductService.deleteProduct(id).then(res => {\n      this.setState({\n        products: this.state.products.filter(item => item.id !== id)\n      });\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"jumbotron\",\n      children: this.state.content === \"Menu\" ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card\",\n        style: {\n          width: \"70rem\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: this.state.content\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 21\n        }, this), this.state.show && /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-primary\",\n          onClick: () => this.props.history.push(\"/product/add\"),\n          children: \"New Product\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 41\n        }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n          className: \"table table-striped table-bordered\",\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Category\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 89,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Picture\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 90,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Name\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 91,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Price\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 92,\n                columnNumber: 33\n              }, this), this.state.show && /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Actions\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 93,\n                columnNumber: 53\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 88,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            children: this.state.listProducts.map(category => category.map(product => /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                children: this.state.listCategories.find(item => item.id === product.categoryId).name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 101,\n                columnNumber: 45\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: [\" \", /*#__PURE__*/_jsxDEV(\"img\", {\n                  alt: \"pic\",\n                  src: product.pictureUri === null ? \"https://www.amerikickkansas.com/wp-content/uploads/2017/04/default-image.jpg\" : product.pictureUri,\n                  height: \"200px\",\n                  width: \"200px\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 102,\n                  columnNumber: 50\n                }, this), \" \"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 102,\n                columnNumber: 45\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: [\" \", product.name, \" \"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 105,\n                columnNumber: 45\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: [\" \", product.price, \"$ / \", product.unit]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 106,\n                columnNumber: 45\n              }, this), this.state.show && /*#__PURE__*/_jsxDEV(\"td\", {\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => this.updateProduct(product.id),\n                  className: \"btn btn-success\",\n                  children: \"Update \"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 108,\n                  columnNumber: 47\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  style: {\n                    marginLeft: \"10px\"\n                  },\n                  onClick: () => this.deleteProduct(product.id),\n                  className: \"btn btn-danger\",\n                  children: \"Delete \"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 109,\n                  columnNumber: 47\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 107,\n                columnNumber: 65\n              }, this)]\n            }, product.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 100,\n              columnNumber: 35\n            }, this)))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 17\n      }, this) : /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: this.state.content\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 19\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["E:/IntelliJ/Projects/Restaurant/Vietnamese_Restaurant/frontend/src/components/product/products.component.jsx"],"names":["React","Component","authService","ProductService","categoryService","productService","Products","constructor","props","state","products","categories","categoryId","currentUser","getCurrentUser","content","listCategories","listProducts","show","product_category","deleteProduct","bind","componentDidMount","getAllProducts","then","response","setState","data","sort","a","b","getAllCategories","forEach","category","list","push","filter","product","id","error","message","toString","roles","includes","getAllProductsByCategory","updateProduct","history","res","item","render","width","map","find","name","pictureUri","price","unit","marginLeft"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport authService from \"../../services/auth.service\";\r\n\r\nimport ProductService from \"../../services/product.service\";\r\nimport categoryService from \"../../services/category.service\";\r\nimport productService from \"../../services/product.service\";\r\n\r\nexport default class Products extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      products: [],\r\n      categories: [],\r\n      categoryId: -1,\r\n      currentUser: authService.getCurrentUser(),\r\n      content:'',\r\n      listCategories: [],\r\n      listProducts: [],\r\n      show: false,\r\n      product_category: []\r\n    };\r\n    this.deleteProduct = this.deleteProduct.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    ProductService.getAllProducts().then(\r\n      response => {\r\n        this.setState({\r\n          products: response.data.sort((a,b) => a.categoryId - b.categoryId),\r\n          content: \"Menu\"\r\n        }); \r\n        categoryService.getAllCategories().then(\r\n          response => {\r\n            this.setState({\r\n              listCategories: response.data\r\n            });\r\n            let listProducts = [];\r\n            this.state.listCategories.forEach(category => {\r\n              let list  = this.state.products;\r\n              listProducts.push(list.filter(product => product.categoryId === category.id));\r\n            })\r\n            this.setState({listProducts: listProducts});\r\n\r\n          },\r\n          error => {}\r\n        );\r\n      },\r\n      error => {\r\n        this.setState({\r\n          content:\r\n            (error.response &&\r\n              error.response.data &&\r\n              error.response.data.message) ||\r\n            error.message ||\r\n            error.toString()\r\n        });\r\n      }\r\n    );\r\n    if (this.state.currentUser){\r\n      if (this.state.currentUser.roles.includes(\"ROLE_ADMIN\") || this.state.currentUser.roles.includes(\"ROLE_MANAGER\")) this.setState({show: true});\r\n    }\r\n    productService.getAllProductsByCategory(0).then()\r\n  }\r\n\r\n  updateProduct(id){\r\n    this.props.history.push(\"/product/\" + id);\r\n  }\r\n\r\n  deleteProduct(id){\r\n    ProductService.deleteProduct(id).then(res => {\r\n      this.setState({\r\n        products: this.state.products.filter(item => item.id !== id)\r\n      });\r\n    })\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"jumbotron\">\r\n          {this.state.content === \"Menu\" ? (\r\n                <div className = \"card\" style={{width: \"70rem\"}}>  \r\n                    <h3>{this.state.content}</h3>                \r\n                    {this.state.show && <button className = \"btn btn-primary\" onClick = {() => this.props.history.push(\"/product/add\")}>New Product</button>}\r\n                    \r\n                    <table className = \"table table-striped table-bordered\">\r\n                        <thead>\r\n                            <tr>\r\n                                <th>Category</th>\r\n                                <th>Picture</th>\r\n                                <th>Name</th>\r\n                                <th>Price</th>         \r\n                                {this.state.show && <th>Actions</th>}\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            {\r\n                                this.state.listProducts.map(category =>\r\n                                  category.map(product => \r\n                                  <tr key = {product.id}>\r\n                                            <td>{this.state.listCategories.find(item => item.id === product.categoryId).name}</td>\r\n                                            <td> <img alt=\"pic\" src={product.pictureUri === null ? \r\n                                                    \"https://www.amerikickkansas.com/wp-content/uploads/2017/04/default-image.jpg\" : product.pictureUri\r\n                                                    } height=\"200px\" width=\"200px\" /> </td>\r\n                                            <td> {product.name} </td>   \r\n                                            <td> {product.price}$ / {product.unit}</td>\r\n                                            {this.state.show && <td>\r\n                                              <button onClick={ () => this.updateProduct(product.id)} className=\"btn btn-success\">Update </button>                                            \r\n                                              <button style={{marginLeft: \"10px\"}} onClick={ () => this.deleteProduct(product.id)} className=\"btn btn-danger\">Delete </button>\r\n                                            </td>}\r\n                                    </tr>\r\n                                  )\r\n                                )\r\n                              }\r\n                              \r\n                        </tbody>\r\n                    </table>\r\n                    \r\n                </div>):(\r\n                  <h3>{this.state.content}</h3>\r\n                )\r\n            }\r\n      </div>\r\n    );\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}