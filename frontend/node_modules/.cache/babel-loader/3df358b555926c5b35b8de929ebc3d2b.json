{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"E:\\\\IntelliJ\\\\Projects\\\\Restaurant\\\\Vietnamese_Restaurant\\\\frontend\\\\src\\\\components\\\\user\\\\profile.component.jsx\";\nimport React, { Component } from \"react\";\nimport { Redirect } from \"react-router-dom\";\nimport authService from \"../../services/auth.service\";\nimport AuthService from \"../../services/auth.service\";\nexport default class Profile extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      redirect: null,\n      userReady: false,\n      currentUser: {\n        username: \"\"\n      }\n    };\n    this.editUser = this.editUser.bind(this);\n    this.deleteUser = this.deleteUser.bind(this);\n  }\n\n  componentDidMount() {\n    const currentUser = AuthService.getCurrentUser();\n    if (!currentUser) this.setState({\n      redirect: \"/home\"\n    });\n    this.setState({\n      currentUser: currentUser,\n      userReady: true\n    });\n  }\n\n  editUser(id) {\n    this.props.history.push(`/user/${id}`);\n  }\n\n  deleteUser(id) {\n    authService.deleteUser(id).then(res => {\n      AuthService.logout();\n      this.props.history.push('/login');\n    });\n  }\n\n  render() {\n    if (this.state.redirect) {\n      return /*#__PURE__*/_jsxDEV(Redirect, {\n        to: this.state.redirect\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 14\n      }, this);\n    }\n\n    const {\n      currentUser\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"jumbotron\",\n      children: this.state.userReady ? /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: currentUser.username\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 50,\n            columnNumber: 13\n          }, this), \" Profile\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 49,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card card-container\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Id:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 56,\n              columnNumber: 17\n            }, this), \" \", currentUser.id]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 55,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Token:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 60,\n              columnNumber: 17\n            }, this), \" \", currentUser.accessToken.substring(0, 20), \" ...\", \" \", currentUser.accessToken.substr(currentUser.accessToken.length - 20)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 59,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Email:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 65,\n              columnNumber: 17\n            }, this), \" \", currentUser.email]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 64,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Authorities:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 68,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n            children: currentUser.roles && currentUser.roles.map((role, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n              children: role\n            }, index, false, {\n              fileName: _jsxFileName,\n              lineNumber: 71,\n              columnNumber: 58\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 69,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => this.editUser(currentUser.id),\n            style: {\n              marginLeft: \"10px\"\n            },\n            className: \"btn btn-success\",\n            children: \"Update \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 15\n          }, this), currentUser.roles.includes(\"ROLE_ADMIN\") && /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => this.deleteUser(currentUser.id),\n            style: {\n              marginLeft: \"10px\"\n            },\n            className: \"btn btn-danger\",\n            children: \"Delete \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 9\n      }, this) : null\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 7\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["E:/IntelliJ/Projects/Restaurant/Vietnamese_Restaurant/frontend/src/components/user/profile.component.jsx"],"names":["React","Component","Redirect","authService","AuthService","Profile","constructor","props","state","redirect","userReady","currentUser","username","editUser","bind","deleteUser","componentDidMount","getCurrentUser","setState","id","history","push","then","res","logout","render","accessToken","substring","substr","length","email","roles","map","role","index","marginLeft","includes"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport authService from \"../../services/auth.service\";\r\nimport AuthService from \"../../services/auth.service\";\r\n\r\nexport default class Profile extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      redirect: null,\r\n      userReady: false,\r\n      currentUser: { username: \"\" }\r\n    };\r\n    this.editUser = this.editUser.bind(this);\r\n    this.deleteUser = this.deleteUser.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    const currentUser = AuthService.getCurrentUser();\r\n\r\n    if (!currentUser) this.setState({ redirect: \"/home\" });\r\n    this.setState({ currentUser: currentUser, userReady: true })\r\n  }\r\n\r\n  editUser(id){\r\n    this.props.history.push(`/user/${id}`);\r\n  }\r\n\r\n  deleteUser(id){\r\n    authService.deleteUser(id).then(res => {\r\n      AuthService.logout();\r\n        this.props.history.push('/login');\r\n    })\r\n  }\r\n\r\n\r\n  render() {\r\n    if (this.state.redirect) {\r\n      return <Redirect to={this.state.redirect} />\r\n    }\r\n\r\n    const { currentUser } = this.state;\r\n\r\n    return (\r\n      <div className=\"jumbotron\">\r\n        {(this.state.userReady) ?\r\n        <div>\r\n          <h3>\r\n            <strong>{currentUser.username}</strong> Profile\r\n            \r\n          </h3>\r\n          \r\n            <div className=\"card card-container\">\r\n              <p>\r\n                <strong>Id:</strong>{\" \"}\r\n                {currentUser.id}\r\n              </p>\r\n              <p>\r\n                <strong>Token:</strong>{\" \"}\r\n                {currentUser.accessToken.substring(0, 20)} ...{\" \"}\r\n                {currentUser.accessToken.substr(currentUser.accessToken.length - 20)}\r\n              </p>\r\n              <p>\r\n                <strong>Email:</strong>{\" \"}\r\n                {currentUser.email}\r\n              </p>\r\n              <strong>Authorities:</strong>\r\n              <ul>\r\n                {currentUser.roles &&\r\n                  currentUser.roles.map((role, index) => <li key={index}>{role}</li>)}\r\n              </ul>\r\n\r\n              <button onClick={ () => this.editUser(currentUser.id)} style={{marginLeft: \"10px\"}} className=\"btn btn-success\">Update </button> \r\n              {currentUser.roles.includes(\"ROLE_ADMIN\") &&\r\n                <button onClick={ () => this.deleteUser(currentUser.id)} style={{marginLeft: \"10px\"}} className=\"btn btn-danger\">Delete </button>\r\n              }\r\n            </div>\r\n          \r\n        \r\n      </div>: null}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}