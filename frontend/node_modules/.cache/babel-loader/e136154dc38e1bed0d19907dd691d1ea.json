{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"E:\\\\IntelliJ\\\\Projects\\\\Restaurant\\\\Vietnamese_Restaurant\\\\frontend\\\\src\\\\components\\\\user\\\\profile.component.jsx\";\nimport React, { Component } from \"react\";\nimport { Redirect } from \"react-router-dom\";\nimport authService from \"../../services/auth.service\";\nimport AuthService from \"../../services/auth.service\";\nexport default class Profile extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      redirect: null,\n      userReady: false,\n      currentUser: {\n        username: \"\"\n      },\n      user: []\n    };\n    this.editUser = this.editUser.bind(this);\n    this.deleteUser = this.deleteUser.bind(this);\n  }\n\n  componentDidMount() {\n    const currentUser = AuthService.getCurrentUser();\n    authService.getUserById(currentUser.id).then(response => {\n      this.setState({\n        user: response.data\n      });\n      console.log(this.se);\n    });\n    if (!currentUser) this.setState({\n      redirect: \"/home\"\n    });\n    this.setState({\n      currentUser: currentUser,\n      userReady: true\n    });\n  }\n\n  editUser(id) {\n    this.props.history.push(`/user/${id}`);\n  }\n\n  deleteUser(id) {\n    authService.deleteUser(id).then(res => {\n      AuthService.logout();\n      this.props.history.push('/login');\n    });\n  }\n\n  render() {\n    if (this.state.redirect) {\n      return /*#__PURE__*/_jsxDEV(Redirect, {\n        to: this.state.redirect\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 14\n      }, this);\n    }\n\n    const {\n      currentUser\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"jumbotron\",\n      children: this.state.userReady ? /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: currentUser.username\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 58,\n            columnNumber: 13\n          }, this), \" Profile\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card card-container\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"User Name:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 69,\n              columnNumber: 17\n            }, this), \" \", currentUser.username]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 68,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Email:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 73,\n              columnNumber: 17\n            }, this), \" \", currentUser.email]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Authorities:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n            children: currentUser.roles && currentUser.roles.map((role, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n              children: role\n            }, index, false, {\n              fileName: _jsxFileName,\n              lineNumber: 79,\n              columnNumber: 58\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n            children: currentUser.request && currentUser.roles.map((role, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n              children: role\n            }, index, false, {\n              fileName: _jsxFileName,\n              lineNumber: 84,\n              columnNumber: 58\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => this.editUser(currentUser.id),\n            style: {\n              marginLeft: \"10px\"\n            },\n            className: \"btn btn-success\",\n            children: \"Update \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 15\n          }, this), currentUser.roles.includes(\"ROLE_ADMIN\") && /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => this.deleteUser(currentUser.id),\n            style: {\n              marginLeft: \"10px\"\n            },\n            className: \"btn btn-danger\",\n            children: \"Delete \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 9\n      }, this) : null\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["E:/IntelliJ/Projects/Restaurant/Vietnamese_Restaurant/frontend/src/components/user/profile.component.jsx"],"names":["React","Component","Redirect","authService","AuthService","Profile","constructor","props","state","redirect","userReady","currentUser","username","user","editUser","bind","deleteUser","componentDidMount","getCurrentUser","getUserById","id","then","response","setState","data","console","log","se","history","push","res","logout","render","email","roles","map","role","index","request","marginLeft","includes"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport authService from \"../../services/auth.service\";\r\nimport AuthService from \"../../services/auth.service\";\r\n\r\nexport default class Profile extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      redirect: null,\r\n      userReady: false,\r\n      currentUser: { username: \"\" },\r\n      user: []\r\n    };\r\n    this.editUser = this.editUser.bind(this);\r\n    this.deleteUser = this.deleteUser.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    const currentUser = AuthService.getCurrentUser();\r\n    authService.getUserById(currentUser.id).then(\r\n      response => {\r\n        this.setState({user: response.data});\r\n        console.log(this.se)\r\n      }\r\n      \r\n    )\r\n\r\n    if (!currentUser) this.setState({ redirect: \"/home\" });\r\n    this.setState({ currentUser: currentUser, userReady: true })\r\n  }\r\n\r\n  editUser(id){\r\n    this.props.history.push(`/user/${id}`);\r\n  }\r\n\r\n  deleteUser(id){\r\n    authService.deleteUser(id).then(res => {\r\n      AuthService.logout();\r\n        this.props.history.push('/login');\r\n    })\r\n  }\r\n\r\n\r\n  render() {\r\n    if (this.state.redirect) {\r\n      return <Redirect to={this.state.redirect} />\r\n    }\r\n\r\n    const { currentUser } = this.state;\r\n\r\n    return (\r\n      <div className=\"jumbotron\">\r\n        {(this.state.userReady) ?\r\n        <div>\r\n          <h3>\r\n            <strong>{currentUser.username}</strong> Profile\r\n            \r\n          </h3>\r\n          \r\n            <div className=\"card card-container\">\r\n              {/* <p>\r\n                <strong>Token:</strong>{\" \"}\r\n                {currentUser.accessToken.substring(0, 20)} ...{\" \"}\r\n                {currentUser.accessToken.substr(currentUser.accessToken.length - 20)}\r\n              </p> */}\r\n              <p>\r\n                <strong>User Name:</strong>{\" \"}\r\n                {currentUser.username}\r\n              </p>\r\n              <p>\r\n                <strong>Email:</strong>{\" \"}\r\n                {currentUser.email}\r\n              </p>\r\n              <strong>Authorities:</strong>\r\n              <ul>\r\n                {currentUser.roles &&\r\n                  currentUser.roles.map((role, index) => <li key={index}>{role}</li>)}\r\n              </ul>\r\n\r\n              <ul>\r\n                {currentUser.request &&\r\n                  currentUser.roles.map((role, index) => <li key={index}>{role}</li>)}\r\n              </ul>\r\n\r\n              <button onClick={ () => this.editUser(currentUser.id)} style={{marginLeft: \"10px\"}} className=\"btn btn-success\">Update </button> \r\n              {currentUser.roles.includes(\"ROLE_ADMIN\") &&\r\n                <button onClick={ () => this.deleteUser(currentUser.id)} style={{marginLeft: \"10px\"}} className=\"btn btn-danger\">Delete </button>\r\n              }\r\n            </div>\r\n          \r\n        \r\n      </div>: null}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}