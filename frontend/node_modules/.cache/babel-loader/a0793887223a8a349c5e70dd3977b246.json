{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"E:\\\\IntelliJ\\\\Projects\\\\Restaurant\\\\Vietnamese_Restaurant\\\\frontend\\\\src\\\\components\\\\product\\\\update-product.component.jsx\";\nimport React, { Component } from \"react\";\nimport Form from \"react-validation/build/form\";\nimport Input from \"react-validation/build/input\";\nimport CheckButton from \"react-validation/build/button\";\nimport ProductService from \"../../services/product.service\";\nimport CategoryService from \"../../services/category.service\";\n\nconst required = value => {\n  if (!value) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"alert alert-danger\",\n      role: \"alert\",\n      children: \"This field is required!\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 12,\n      columnNumber: 7\n    }, this);\n  }\n};\n\nconst vname = value => {\n  if (value.length < 3) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"alert alert-danger\",\n      role: \"alert\",\n      children: \"The name must be longer than 3 characters.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 22,\n      columnNumber: 7\n    }, this);\n  }\n};\n\nexport default class UpdateProduct extends Component {\n  constructor(props) {\n    super(props);\n    this.handleProduct = this.handleProduct.bind(this);\n    this.onChangeName = this.onChangeName.bind(this);\n    this.onChangePrice = this.onChangePrice.bind(this); // this.onChangeSku = this.onChangeSku.bind(this);\n\n    this.onChangeUnit = this.onChangeUnit.bind(this); // this.onChangeShowOnHomepage = this.onChangeShowOnHomepage.bind(this);\n    // this.onChangeEnteredPrice = this.onChangeEnteredPrice.bind(this);\n\n    this.onChangePicture = this.onChangePicture.bind(this);\n    this.onChangeCategory = this.onChangeCategory.bind(this);\n    this.state = {\n      id: parseInt(this.props.match.params.id),\n      name: \"\",\n      sku: \"\",\n      price: \"0\",\n      unit: \"ITEM\",\n      // isShowOnHomepage: false,\n      // isEnteredPrice: false,\n      pictureId: null,\n      picturePreviewUrl: null,\n      successful: false,\n      message: \"\",\n      listUnit: [\"ITEM\", \"PIECE\", \"SET\", \"KG\"],\n      listCategories: []\n    };\n  }\n\n  componentDidMount() {\n    CategoryService.getListParent(-1).then(response => {\n      this.setState({\n        listCategories: response.data\n      });\n    }, error => {});\n    ProductService.getProductById(this.state.id).then(response => {\n      this.setState({\n        name: response.data.name,\n        sku: response.data.sku,\n        price: response.data.price,\n        unit: response.data.unit,\n        // isShowOnHomepage: response.data.showOnHomepage,\n        // isEnteredPrice: response.data.enteredPrice,\n        pictureId: response.data.pictureId,\n        picturePreviewUrl: response.data.pictureUri,\n        categoryId: response.data.categoryId\n      });\n    }, error => {\n      this.props.history.push(\"/product\");\n      alert(\"Product not found\");\n    });\n  }\n\n  onChangeName(e) {\n    this.setState({\n      name: e.target.value\n    });\n  }\n\n  onChangePrice(e) {\n    this.setState({\n      price: e.target.value\n    });\n  } // onChangeSku(e) {\n  //   this.setState({\n  //     sku: e.target.value\n  //   });\n  // }\n\n\n  onChangeUnit(e) {\n    this.setState({\n      unit: e.target.value\n    });\n  } // onChangeShowOnHomepage(){\n  //   this.setState({\n  //       isShowOnHomepage: !this.state.isShowOnHomepage\n  //   });\n  // }\n  // onChangeEnteredPrice(){\n  //   this.setState({\n  //       isEnteredPrice: !this.state.isEnteredPrice\n  //   });\n  // }\n\n\n  onChangeCategory(e) {\n    this.setState({\n      categoryId: e.target.value\n    });\n  }\n\n  onChangePicture(e) {\n    e.preventDefault();\n    const formData = new FormData();\n    formData.append('file', e.target.files[0]);\n    ProductService.uploadPicture(formData).then(response => {\n      this.setState({\n        pictureId: response.data\n      });\n      alert(\"Picture uploaded successfully!\");\n    }, error => {\n      const resMessage = error.response && error.response.data && error.response.data.message || error.message || error.toString();\n      alert(resMessage);\n    });\n    const reader = new FileReader();\n    reader.readAsDataURL(e.target.files[0]);\n\n    reader.onload = () => {\n      this.setState({\n        picturePreviewUrl: reader.result\n      });\n    };\n  }\n\n  handleProduct(e) {\n    e.preventDefault();\n    this.setState({\n      message: \"\",\n      successful: false\n    });\n    this.form.validateAll();\n\n    if (this.checkBtn.context._errors.length === 0) {\n      let productRequest = {\n        name: this.state.name,\n        sku: this.state.sku,\n        price: this.state.price,\n        unit: this.state.unit,\n        // isShowOnHomepage: this.state.isShowOnHomepage, \n        // isEnteredPrice: this.state.isEnteredPrice,\n        pictureId: this.state.pictureId,\n        categoryId: this.state.categoryId\n      };\n      ProductService.updateProduct(this.state.id, productRequest).then(response => {\n        this.setState({\n          message: response.data.message,\n          successful: true\n        });\n      }, error => {\n        const resMessage = error.response && error.response.data && error.response.data.message || error.message || error.toString();\n        this.setState({\n          successful: false,\n          message: resMessage\n        });\n      });\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card\",\n        style: {\n          marginTop: \"70px\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Update Product\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 217,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(Form, {\n          onSubmit: this.handleProduct,\n          ref: c => {\n            this.form = c;\n          },\n          children: [!this.state.successful && /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"row\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-group col-6\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  htmlFor: \"categoryId\",\n                  children: \"Category\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 229,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                  className: \"form-control\",\n                  name: \"categoryId\",\n                  value: this.state.categoryId,\n                  onChange: this.onChangeCategory,\n                  children: this.state.listCategories.map(item => {\n                    return /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: item.id,\n                      children: [\" \", item.name, \" \"]\n                    }, item.id, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 239,\n                      columnNumber: 31\n                    }, this);\n                  })\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 230,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 228,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-group\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  htmlFor: \"name\",\n                  children: \"Product Name\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 247,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Input, {\n                  type: \"text\",\n                  className: \"form-control\",\n                  name: \"name\",\n                  value: this.state.name,\n                  onChange: this.onChangeName,\n                  validations: [required, vname]\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 248,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 246,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 227,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"price\",\n                children: \"Price\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 273,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Input, {\n                type: \"number\",\n                className: \"form-control\",\n                name: \"price\",\n                step: \".01\",\n                value: this.state.price,\n                onChange: this.onChangePrice\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 274,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 272,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"unit\",\n                children: \"Unit\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 285,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                className: \"form-control\",\n                name: \"unit\",\n                value: this.state.unit,\n                onChange: this.onChangeUnit,\n                children: this.state.listUnit.map(item => {\n                  return /*#__PURE__*/_jsxDEV(\"option\", {\n                    children: [item, \" \"]\n                  }, item, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 295,\n                    columnNumber: 29\n                  }, this);\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 286,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 284,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"picture\",\n                children: \"Picture\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 325,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(Input, {\n                type: \"file\",\n                name: \"picture\",\n                accept: \"image/*\",\n                onChange: this.onChangePicture\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 326,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n                alt: \"preview\",\n                src: this.state.picturePreviewUrl === null ? \"https://www.amerikickkansas.com/wp-content/uploads/2017/04/default-image.jpg\" : this.state.picturePreviewUrl,\n                height: \"200px\",\n                width: \"200px\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 332,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 324,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group\",\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn btn-primary btn-block\",\n                children: \"Update Product\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 339,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 338,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 225,\n            columnNumber: 15\n          }, this), this.state.message && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: this.state.successful ? \"alert alert-success\" : \"alert alert-danger\",\n              role: \"alert\",\n              children: this.state.message\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 346,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 345,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(CheckButton, {\n            style: {\n              display: \"none\"\n            },\n            ref: c => {\n              this.checkBtn = c;\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 358,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 218,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 7\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["E:/IntelliJ/Projects/Restaurant/Vietnamese_Restaurant/frontend/src/components/product/update-product.component.jsx"],"names":["React","Component","Form","Input","CheckButton","ProductService","CategoryService","required","value","vname","length","UpdateProduct","constructor","props","handleProduct","bind","onChangeName","onChangePrice","onChangeUnit","onChangePicture","onChangeCategory","state","id","parseInt","match","params","name","sku","price","unit","pictureId","picturePreviewUrl","successful","message","listUnit","listCategories","componentDidMount","getListParent","then","response","setState","data","error","getProductById","pictureUri","categoryId","history","push","alert","e","target","preventDefault","formData","FormData","append","files","uploadPicture","resMessage","toString","reader","FileReader","readAsDataURL","onload","result","form","validateAll","checkBtn","context","_errors","productRequest","updateProduct","render","marginTop","c","map","item","display"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport Form from \"react-validation/build/form\";\r\nimport Input from \"react-validation/build/input\";\r\nimport CheckButton from \"react-validation/build/button\";\r\n\r\nimport ProductService from \"../../services/product.service\";\r\nimport CategoryService from \"../../services/category.service\";\r\n\r\nconst required = value => {\r\n  if (!value) {\r\n    return (\r\n      <div className=\"alert alert-danger\" role=\"alert\">\r\n        This field is required!\r\n      </div>\r\n    );\r\n  }\r\n};\r\n\r\nconst vname = value => {\r\n  if (value.length < 3) {\r\n    return (\r\n      <div className=\"alert alert-danger\" role=\"alert\">\r\n        The name must be longer than 3 characters.\r\n      </div>\r\n    );\r\n  }\r\n};\r\n\r\nexport default class UpdateProduct extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.handleProduct = this.handleProduct.bind(this);\r\n    this.onChangeName = this.onChangeName.bind(this);\r\n    this.onChangePrice = this.onChangePrice.bind(this);\r\n    // this.onChangeSku = this.onChangeSku.bind(this);\r\n    this.onChangeUnit = this.onChangeUnit.bind(this);\r\n    // this.onChangeShowOnHomepage = this.onChangeShowOnHomepage.bind(this);\r\n    // this.onChangeEnteredPrice = this.onChangeEnteredPrice.bind(this);\r\n    this.onChangePicture = this.onChangePicture.bind(this);\r\n    this.onChangeCategory = this.onChangeCategory.bind(this);\r\n\r\n    this.state = {\r\n      id: parseInt(this.props.match.params.id),\r\n      name: \"\",\r\n      sku: \"\",\r\n      price: \"0\",\r\n      unit: \"ITEM\",\r\n      // isShowOnHomepage: false,\r\n      // isEnteredPrice: false,\r\n      pictureId: null,\r\n      picturePreviewUrl: null,\r\n      successful: false,\r\n      message: \"\",\r\n      listUnit: [\"ITEM\", \"PIECE\", \"SET\", \"KG\"],\r\n      listCategories: []\r\n    };\r\n  }\r\n\r\n  componentDidMount(){\r\n    CategoryService.getListParent(-1).then(\r\n      response => {\r\n        this.setState({\r\n          listCategories: response.data\r\n        });\r\n      },\r\n      error => {}\r\n    );    \r\n    ProductService.getProductById(this.state.id).then(\r\n        response => {                \r\n          this.setState({\r\n              name: response.data.name,\r\n              sku: response.data.sku,\r\n              price: response.data.price,\r\n              unit: response.data.unit,\r\n              // isShowOnHomepage: response.data.showOnHomepage,\r\n              // isEnteredPrice: response.data.enteredPrice,\r\n              pictureId: response.data.pictureId,\r\n              picturePreviewUrl: response.data.pictureUri,\r\n              categoryId: response.data.categoryId      \r\n          });\r\n        },        \r\n        error => {\r\n          this.props.history.push(\"/product\");\r\n          alert(\"Product not found\");\r\n        }        \r\n    );\r\n  }\r\n\r\n\r\n  onChangeName(e) {\r\n    this.setState({\r\n      name: e.target.value\r\n    });\r\n  }\r\n\r\n  onChangePrice(e) {\r\n    this.setState({\r\n      price: e.target.value\r\n    });\r\n  }\r\n\r\n  // onChangeSku(e) {\r\n  //   this.setState({\r\n  //     sku: e.target.value\r\n  //   });\r\n  // }\r\n\r\n  onChangeUnit(e){\r\n      this.setState({\r\n          unit: e.target.value\r\n      });\r\n  }\r\n\r\n  // onChangeShowOnHomepage(){\r\n  //   this.setState({\r\n  //       isShowOnHomepage: !this.state.isShowOnHomepage\r\n  //   });\r\n  // }\r\n\r\n  // onChangeEnteredPrice(){\r\n  //   this.setState({\r\n  //       isEnteredPrice: !this.state.isEnteredPrice\r\n  //   });\r\n  // }\r\n\r\n  onChangeCategory(e)\r\n  {\r\n    this.setState({\r\n      categoryId: e.target.value\r\n    });\r\n  }\r\n\r\n  onChangePicture(e){\r\n    e.preventDefault();\r\n    const formData = new FormData();\r\n    formData.append('file', e.target.files[0]);\r\n    ProductService.uploadPicture(\r\n      formData\r\n      ).then(\r\n      response => {\r\n        this.setState({\r\n          pictureId: response.data\r\n        });\r\n        alert(\"Picture uploaded successfully!\");\r\n      },\r\n      error => {\r\n        const resMessage =\r\n          (error.response &&\r\n            error.response.data &&\r\n            error.response.data.message) ||\r\n          error.message ||\r\n          error.toString();\r\n        alert(resMessage);\r\n      }\r\n    );\r\n    const reader = new FileReader();\r\n    reader.readAsDataURL(e.target.files[0]);\r\n    reader.onload = () =>{\r\n        this.setState({\r\n        picturePreviewUrl: reader.result\r\n      });\r\n    }\r\n  }\r\n\r\n  handleProduct(e) {\r\n    e.preventDefault();\r\n\r\n    this.setState({\r\n      message: \"\",\r\n      successful: false\r\n    });\r\n\r\n    this.form.validateAll();\r\n\r\n    if (this.checkBtn.context._errors.length === 0) {      \r\n      let productRequest = {\r\n        name: this.state.name,\r\n        sku: this.state.sku,\r\n        price: this.state.price,\r\n        unit: this.state.unit,\r\n        // isShowOnHomepage: this.state.isShowOnHomepage, \r\n        // isEnteredPrice: this.state.isEnteredPrice,\r\n        pictureId: this.state.pictureId,\r\n        categoryId: this.state.categoryId\r\n      };  \r\n      ProductService.updateProduct(\r\n        this.state.id,\r\n        productRequest\r\n      ).then(\r\n        response => {\r\n          this.setState({\r\n            message: response.data.message,\r\n            successful: true\r\n          });\r\n        },\r\n        error => {\r\n          const resMessage =\r\n            (error.response &&\r\n              error.response.data &&\r\n              error.response.data.message) ||\r\n            error.message ||\r\n            error.toString();\r\n\r\n          this.setState({\r\n            successful: false,\r\n            message: resMessage\r\n          });\r\n        }\r\n      );\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"row\">\r\n        <div className=\"card\" style={{marginTop:\"70px\"}}>\r\n        <h3>Update Product</h3>\r\n          <Form\r\n            onSubmit={this.handleProduct}\r\n            ref={c => {\r\n              this.form = c;\r\n            }}\r\n          >\r\n            {!this.state.successful && (\r\n              <div>\r\n\r\n              <div className=\"row\">\r\n                <div className=\"form-group col-6\">\r\n                    <label htmlFor=\"categoryId\">Category</label>\r\n                    <select\r\n                      className=\"form-control\"\r\n                      name=\"categoryId\"\r\n                      value={this.state.categoryId}\r\n                      onChange={this.onChangeCategory}\r\n                      >\r\n                    {\r\n                        this.state.listCategories.map(item =>{\r\n                            return (\r\n                              <option key={item.id} value={item.id}> {item.name} </option>\r\n                            )\r\n                        })\r\n                    }\r\n                    </select>\r\n                </div>\r\n\r\n                <div className=\"form-group\">\r\n                  <label htmlFor=\"name\">Product Name</label>\r\n                  <Input\r\n                    type=\"text\"\r\n                    className=\"form-control\"\r\n                    name=\"name\"\r\n                    value={this.state.name}\r\n                    onChange={this.onChangeName}\r\n                    validations={[required, vname]}\r\n                  />\r\n                </div>\r\n              </div>\r\n              \r\n                \r\n\r\n                {/* <div className=\"form-group\">\r\n                  <label htmlFor=\"sku\">SKU</label>\r\n                  <Input\r\n                    type=\"text\"\r\n                    className=\"form-control\"\r\n                    name=\"sku\"\r\n                    value={this.state.sku}\r\n                    onChange={this.onChangeSku}\r\n                  />\r\n                </div> */}\r\n\r\n                <div className=\"form-group\">\r\n                  <label htmlFor=\"price\">Price</label>\r\n                  <Input\r\n                    type=\"number\"\r\n                    className=\"form-control\"\r\n                    name=\"price\"\r\n                    step=\".01\"\r\n                    value={this.state.price}\r\n                    onChange={this.onChangePrice}\r\n                  />\r\n                </div>\r\n                \r\n                <div className=\"form-group\">\r\n                    <label htmlFor=\"unit\">Unit</label>\r\n                    <select\r\n                      className=\"form-control\"\r\n                      name=\"unit\"\r\n                      value={this.state.unit}\r\n                      onChange={this.onChangeUnit}\r\n                      >\r\n                    {\r\n                        this.state.listUnit.map(item =>{\r\n                            return (\r\n                            <option key={item}>{item} </option>\r\n                            )\r\n                        })\r\n                    }\r\n                    </select>\r\n                </div>\r\n\r\n                {/* <div className=\"form-group\">\r\n                    <label htmlFor=\"isShowOnHomepage\">Show On Homepage</label>\r\n                    <Input\r\n                      type=\"checkbox\"\r\n                      name=\"isShowOnHomepage\"\r\n                      checked= {this.state.isShowOnHomepage}                   \r\n                      value={this.state.isShowOnHomepage}\r\n                      onChange={this.onChangeShowOnHomepage}\r\n                    />\r\n                </div>\r\n                \r\n                <div className=\"form-group\">\r\n                    <label htmlFor=\"isEnteredPrice\">Allow Enter Price</label>\r\n                    <Input\r\n                      type=\"checkbox\"\r\n                      name=\"isEnteredPrice\"\r\n                      checked= {this.state.isEnteredPrice} \r\n                      value={this.state.isEnteredPrice}\r\n                      onChange={this.onChangeEnteredPrice}\r\n                    />\r\n                </div> */}\r\n\r\n                <div className=\"form-group\">\r\n                    <label htmlFor=\"picture\">Picture</label>\r\n                    <Input\r\n                      type=\"file\"\r\n                      name=\"picture\"\r\n                      accept=\"image/*\"\r\n                      onChange={this.onChangePicture}\r\n                    />                                        \r\n                    <img alt=\"preview\" src={\r\n                      this.state.picturePreviewUrl === null ? \r\n                      \"https://www.amerikickkansas.com/wp-content/uploads/2017/04/default-image.jpg\" : this.state.picturePreviewUrl\r\n                      } height=\"200px\" width=\"200px\"/>\r\n                </div>\r\n\r\n                <div className=\"form-group\">\r\n                  <button className=\"btn btn-primary btn-block\">Update Product</button>\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {this.state.message && (\r\n              <div className=\"form-group\">\r\n                <div\r\n                  className={\r\n                    this.state.successful\r\n                      ? \"alert alert-success\"\r\n                      : \"alert alert-danger\"\r\n                  }\r\n                  role=\"alert\"\r\n                >\r\n                  {this.state.message}\r\n                </div>\r\n              </div>\r\n            )}\r\n            <CheckButton\r\n              style={{ display: \"none\" }}\r\n              ref={c => {\r\n                this.checkBtn = c;\r\n              }}\r\n            />\r\n          </Form>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}