{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"E:\\\\IntelliJ\\\\Projects\\\\Restaurant\\\\Vietnamese_Restaurant\\\\frontend\\\\src\\\\components\\\\product\\\\new-product.component.jsx\";\nimport React, { Component } from \"react\";\nimport Form from \"react-validation/build/form\";\nimport Input from \"react-validation/build/input\";\nimport CheckButton from \"react-validation/build/button\";\nimport ProductService from \"../../services/product.service\";\nimport CategoryService from \"../../services/category.service\";\n\nconst required = value => {\n  if (!value) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"alert alert-danger\",\n      role: \"alert\",\n      children: \"This field is required!\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 12,\n      columnNumber: 7\n    }, this);\n  }\n};\n\nconst vname = value => {\n  if (value.length < 3) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"alert alert-danger\",\n      role: \"alert\",\n      children: \"The name must be longer than 3 characters.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 22,\n      columnNumber: 7\n    }, this);\n  }\n};\n\nexport default class NewProduct extends Component {\n  constructor(props) {\n    super(props);\n    this.handleProduct = this.handleProduct.bind(this);\n    this.onChangeName = this.onChangeName.bind(this);\n    this.onChangePrice = this.onChangePrice.bind(this);\n    this.onChangeSku = this.onChangeSku.bind(this);\n    this.onChangeUnit = this.onChangeUnit.bind(this);\n    this.onChangeShowOnHomepage = this.onChangeShowOnHomepage.bind(this);\n    this.onChangeEnteredPrice = this.onChangeEnteredPrice.bind(this);\n    this.onChangePicture = this.onChangePicture.bind(this);\n    this.onChangeCategory = this.onChangeCategory.bind(this);\n    this.state = {\n      name: \"\",\n      sku: \"\",\n      price: \"0\",\n      unit: \"ITEM\",\n      isShowOnHomepage: false,\n      isEnteredPrice: false,\n      pictureId: null,\n      picturePreviewUrl: null,\n      categoryId: null,\n      successful: false,\n      message: \"\",\n      listUnit: [\"ITEM\", \"PIECE\", \"SET\", \"KG\"],\n      listCategories: []\n    };\n  }\n\n  componentDidMount() {\n    CategoryService.getListParent(-1).then(response => {\n      this.setState({\n        listCategories: response.data\n      });\n    }, error => {});\n  }\n\n  onChangeName(e) {\n    this.setState({\n      name: e.target.value\n    });\n  }\n\n  onChangePrice(e) {\n    this.setState({\n      price: e.target.value\n    });\n  }\n\n  onChangeSku(e) {\n    this.setState({\n      sku: e.target.value\n    });\n  }\n\n  onChangeUnit(e) {\n    this.setState({\n      unit: e.target.value\n    });\n  }\n\n  onChangeShowOnHomepage() {\n    this.setState({\n      isShowOnHomepage: !this.state.isShowOnHomepage\n    });\n  }\n\n  onChangeEnteredPrice() {\n    this.setState({\n      isEnteredPrice: !this.state.isEnteredPrice\n    });\n  }\n\n  onChangeCategory(e) {\n    this.setState({\n      categoryId: e.target.value\n    });\n  }\n\n  onChangePicture(e) {\n    e.preventDefault();\n    const formData = new FormData();\n    formData.append('file', e.target.files[0]);\n    ProductService.uploadPicture(formData).then(response => {\n      this.setState({\n        pictureId: response.data\n      });\n      alert(\"Picture uploaded successfully!\");\n    }, error => {\n      const resMessage = error.response && error.response.data && error.response.data.message || error.message || error.toString();\n      alert(resMessage);\n    });\n    const reader = new FileReader();\n    reader.readAsDataURL(e.target.files[0]);\n\n    reader.onload = () => {\n      this.setState({\n        picturePreviewUrl: reader.result\n      });\n    };\n  }\n\n  handleProduct(e) {\n    e.preventDefault();\n    this.setState({\n      message: \"\",\n      successful: false\n    });\n    this.form.validateAll();\n\n    if (this.checkBtn.context._errors.length === 0) {\n      let productRequest = {\n        name: this.state.name,\n        sku: this.state.sku,\n        price: this.state.price,\n        unit: this.state.unit,\n        isShowOnHomepage: this.state.isShowOnHomepage,\n        isEnteredPrice: this.state.isEnteredPrice,\n        pictureId: this.state.pictureId,\n        categoryId: this.state.categoryId\n      };\n      ProductService.addNewProduct(productRequest).then(response => {\n        this.setState({\n          message: response.data.message,\n          successful: true\n        });\n      }, error => {\n        const resMessage = error.response && error.response.data && error.response.data.message || error.message || error.toString();\n        this.setState({\n          successful: false,\n          message: resMessage\n        });\n      });\n      this.props.history.push('/product');\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card\",\n        style: ({\n          marginTop: \"70px\"\n        }, {\n          width: \"30rem\"\n        }),\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"New Product\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Form, {\n          onSubmit: this.handleProduct,\n          ref: c => {\n            this.form = c;\n          },\n          children: [!this.state.successful && /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"row\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"col-6\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  htmlFor: \"categoryId\",\n                  children: \"Category\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 210,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                  className: \"form-control\",\n                  name: \"categoryId\",\n                  value: this.state.categoryId,\n                  onChange: this.onChangeCategory,\n                  children: this.state.listCategories.map(item => {\n                    return /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: item.id,\n                      children: [\" \", item.name, \" \"]\n                    }, item.id, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 220,\n                      columnNumber: 33\n                    }, this);\n                  })\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 211,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 209,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"col\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  htmlFor: \"name\",\n                  children: \"Product Name\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 228,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Input, {\n                  type: \"text\",\n                  className: \"form-control\",\n                  name: \"name\",\n                  value: this.state.name,\n                  onChange: this.onChangeName,\n                  validations: [required, vname]\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 229,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 227,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 208,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"sku\",\n                children: \"SKU\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 242,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Input, {\n                type: \"text\",\n                className: \"form-control\",\n                name: \"sku\",\n                value: this.state.sku,\n                onChange: this.onChangeSku\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 243,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 241,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"row\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"col-6\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  htmlFor: \"price\",\n                  children: \"Price\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 254,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Input, {\n                  type: \"number\",\n                  className: \"form-control\",\n                  name: \"price\",\n                  step: \".01\",\n                  value: this.state.price,\n                  onChange: this.onChangePrice\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 255,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 253,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"col-6\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  htmlFor: \"unit\",\n                  children: \"Unit\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 266,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                  className: \"form-control\",\n                  name: \"unit\",\n                  value: this.state.unit,\n                  onChange: this.onChangeUnit,\n                  children: this.state.listUnit.map(item => {\n                    return /*#__PURE__*/_jsxDEV(\"option\", {\n                      children: [item, \" \"]\n                    }, item, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 276,\n                      columnNumber: 31\n                    }, this);\n                  })\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 267,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 265,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 252,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"picture\",\n                children: \"Picture\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 306,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(Input, {\n                type: \"file\",\n                name: \"picture\",\n                accept: \"image/*\",\n                onChange: this.onChangePicture\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 307,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n                alt: \"preview\",\n                src: this.state.picturePreviewUrl === null ? \"https://www.amerikickkansas.com/wp-content/uploads/2017/04/default-image.jpg\" : this.state.picturePreviewUrl,\n                height: \"200px\",\n                width: \"200px\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 313,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 305,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group\",\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn btn-primary btn-block\",\n                children: \"Add New Product\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 320,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 319,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 206,\n            columnNumber: 15\n          }, this), this.state.message && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: this.state.successful ? \"alert alert-success\" : \"alert alert-danger\",\n              role: \"alert\",\n              children: this.state.message\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 327,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 326,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(CheckButton, {\n            style: {\n              display: \"none\"\n            },\n            ref: c => {\n              this.checkBtn = c;\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 339,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 199,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 7\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["E:/IntelliJ/Projects/Restaurant/Vietnamese_Restaurant/frontend/src/components/product/new-product.component.jsx"],"names":["React","Component","Form","Input","CheckButton","ProductService","CategoryService","required","value","vname","length","NewProduct","constructor","props","handleProduct","bind","onChangeName","onChangePrice","onChangeSku","onChangeUnit","onChangeShowOnHomepage","onChangeEnteredPrice","onChangePicture","onChangeCategory","state","name","sku","price","unit","isShowOnHomepage","isEnteredPrice","pictureId","picturePreviewUrl","categoryId","successful","message","listUnit","listCategories","componentDidMount","getListParent","then","response","setState","data","error","e","target","preventDefault","formData","FormData","append","files","uploadPicture","alert","resMessage","toString","reader","FileReader","readAsDataURL","onload","result","form","validateAll","checkBtn","context","_errors","productRequest","addNewProduct","history","push","render","marginTop","width","c","map","item","id","display"],"mappings":";;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,IAAP,MAAiB,6BAAjB;AACA,OAAOC,KAAP,MAAkB,8BAAlB;AACA,OAAOC,WAAP,MAAwB,+BAAxB;AAEA,OAAOC,cAAP,MAA2B,gCAA3B;AACA,OAAOC,eAAP,MAA4B,iCAA5B;;AAEA,MAAMC,QAAQ,GAAGC,KAAK,IAAI;AACxB,MAAI,CAACA,KAAL,EAAY;AACV,wBACE;AAAK,MAAA,SAAS,EAAC,oBAAf;AAAoC,MAAA,IAAI,EAAC,OAAzC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADF;AAKD;AACF,CARD;;AAUA,MAAMC,KAAK,GAAGD,KAAK,IAAI;AACrB,MAAIA,KAAK,CAACE,MAAN,GAAe,CAAnB,EAAsB;AACpB,wBACE;AAAK,MAAA,SAAS,EAAC,oBAAf;AAAoC,MAAA,IAAI,EAAC,OAAzC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADF;AAKD;AACF,CARD;;AAUA,eAAe,MAAMC,UAAN,SAAyBV,SAAzB,CAAmC;AAChDW,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;AACA,SAAKC,aAAL,GAAqB,KAAKA,aAAL,CAAmBC,IAAnB,CAAwB,IAAxB,CAArB;AACA,SAAKC,YAAL,GAAoB,KAAKA,YAAL,CAAkBD,IAAlB,CAAuB,IAAvB,CAApB;AACA,SAAKE,aAAL,GAAqB,KAAKA,aAAL,CAAmBF,IAAnB,CAAwB,IAAxB,CAArB;AACA,SAAKG,WAAL,GAAmB,KAAKA,WAAL,CAAiBH,IAAjB,CAAsB,IAAtB,CAAnB;AACA,SAAKI,YAAL,GAAoB,KAAKA,YAAL,CAAkBJ,IAAlB,CAAuB,IAAvB,CAApB;AACA,SAAKK,sBAAL,GAA8B,KAAKA,sBAAL,CAA4BL,IAA5B,CAAiC,IAAjC,CAA9B;AACA,SAAKM,oBAAL,GAA4B,KAAKA,oBAAL,CAA0BN,IAA1B,CAA+B,IAA/B,CAA5B;AACA,SAAKO,eAAL,GAAuB,KAAKA,eAAL,CAAqBP,IAArB,CAA0B,IAA1B,CAAvB;AACA,SAAKQ,gBAAL,GAAwB,KAAKA,gBAAL,CAAsBR,IAAtB,CAA2B,IAA3B,CAAxB;AAEA,SAAKS,KAAL,GAAa;AACXC,MAAAA,IAAI,EAAE,EADK;AAEXC,MAAAA,GAAG,EAAE,EAFM;AAGXC,MAAAA,KAAK,EAAE,GAHI;AAIXC,MAAAA,IAAI,EAAE,MAJK;AAKXC,MAAAA,gBAAgB,EAAE,KALP;AAMXC,MAAAA,cAAc,EAAE,KANL;AAOXC,MAAAA,SAAS,EAAE,IAPA;AAQXC,MAAAA,iBAAiB,EAAE,IARR;AASXC,MAAAA,UAAU,EAAE,IATD;AAUXC,MAAAA,UAAU,EAAE,KAVD;AAWXC,MAAAA,OAAO,EAAE,EAXE;AAYXC,MAAAA,QAAQ,EAAE,CAAC,MAAD,EAAS,OAAT,EAAkB,KAAlB,EAAyB,IAAzB,CAZC;AAaXC,MAAAA,cAAc,EAAE;AAbL,KAAb;AAeD;;AAEDC,EAAAA,iBAAiB,GAAE;AACjBhC,IAAAA,eAAe,CAACiC,aAAhB,CAA8B,CAAC,CAA/B,EAAkCC,IAAlC,CACEC,QAAQ,IAAI;AACV,WAAKC,QAAL,CAAc;AACZL,QAAAA,cAAc,EAAEI,QAAQ,CAACE;AADb,OAAd;AAGD,KALH,EAMEC,KAAK,IAAI,CAAE,CANb;AAQD;;AAED5B,EAAAA,YAAY,CAAC6B,CAAD,EAAI;AACd,SAAKH,QAAL,CAAc;AACZjB,MAAAA,IAAI,EAAEoB,CAAC,CAACC,MAAF,CAAStC;AADH,KAAd;AAGD;;AAEDS,EAAAA,aAAa,CAAC4B,CAAD,EAAI;AACf,SAAKH,QAAL,CAAc;AACZf,MAAAA,KAAK,EAAEkB,CAAC,CAACC,MAAF,CAAStC;AADJ,KAAd;AAGD;;AAEDU,EAAAA,WAAW,CAAC2B,CAAD,EAAI;AACb,SAAKH,QAAL,CAAc;AACZhB,MAAAA,GAAG,EAAEmB,CAAC,CAACC,MAAF,CAAStC;AADF,KAAd;AAGD;;AAEDW,EAAAA,YAAY,CAAC0B,CAAD,EAAG;AACX,SAAKH,QAAL,CAAc;AACVd,MAAAA,IAAI,EAAEiB,CAAC,CAACC,MAAF,CAAStC;AADL,KAAd;AAGH;;AAEDY,EAAAA,sBAAsB,GAAE;AACtB,SAAKsB,QAAL,CAAc;AACVb,MAAAA,gBAAgB,EAAE,CAAC,KAAKL,KAAL,CAAWK;AADpB,KAAd;AAGD;;AAEDR,EAAAA,oBAAoB,GAAE;AACpB,SAAKqB,QAAL,CAAc;AACVZ,MAAAA,cAAc,EAAE,CAAC,KAAKN,KAAL,CAAWM;AADlB,KAAd;AAGD;;AAEDP,EAAAA,gBAAgB,CAACsB,CAAD,EAChB;AACE,SAAKH,QAAL,CAAc;AACZT,MAAAA,UAAU,EAAEY,CAAC,CAACC,MAAF,CAAStC;AADT,KAAd;AAGD;;AAEDc,EAAAA,eAAe,CAACuB,CAAD,EAAG;AAChBA,IAAAA,CAAC,CAACE,cAAF;AACA,UAAMC,QAAQ,GAAG,IAAIC,QAAJ,EAAjB;AACAD,IAAAA,QAAQ,CAACE,MAAT,CAAgB,MAAhB,EAAwBL,CAAC,CAACC,MAAF,CAASK,KAAT,CAAe,CAAf,CAAxB;AACA9C,IAAAA,cAAc,CAAC+C,aAAf,CACEJ,QADF,EAEIR,IAFJ,CAGEC,QAAQ,IAAI;AACV,WAAKC,QAAL,CAAc;AACZX,QAAAA,SAAS,EAAEU,QAAQ,CAACE;AADR,OAAd;AAGAU,MAAAA,KAAK,CAAC,gCAAD,CAAL;AACD,KARH,EASET,KAAK,IAAI;AACP,YAAMU,UAAU,GACbV,KAAK,CAACH,QAAN,IACCG,KAAK,CAACH,QAAN,CAAeE,IADhB,IAECC,KAAK,CAACH,QAAN,CAAeE,IAAf,CAAoBR,OAFtB,IAGAS,KAAK,CAACT,OAHN,IAIAS,KAAK,CAACW,QAAN,EALF;AAMAF,MAAAA,KAAK,CAACC,UAAD,CAAL;AACD,KAjBH;AAmBA,UAAME,MAAM,GAAG,IAAIC,UAAJ,EAAf;AACAD,IAAAA,MAAM,CAACE,aAAP,CAAqBb,CAAC,CAACC,MAAF,CAASK,KAAT,CAAe,CAAf,CAArB;;AACAK,IAAAA,MAAM,CAACG,MAAP,GAAgB,MAAK;AACjB,WAAKjB,QAAL,CAAc;AACdV,QAAAA,iBAAiB,EAAEwB,MAAM,CAACI;AADZ,OAAd;AAGH,KAJD;AAKD;;AAED9C,EAAAA,aAAa,CAAC+B,CAAD,EAAI;AACfA,IAAAA,CAAC,CAACE,cAAF;AAEA,SAAKL,QAAL,CAAc;AACZP,MAAAA,OAAO,EAAE,EADG;AAEZD,MAAAA,UAAU,EAAE;AAFA,KAAd;AAKA,SAAK2B,IAAL,CAAUC,WAAV;;AAEA,QAAI,KAAKC,QAAL,CAAcC,OAAd,CAAsBC,OAAtB,CAA8BvD,MAA9B,KAAyC,CAA7C,EAAgD;AAC9C,UAAIwD,cAAc,GAAG;AACnBzC,QAAAA,IAAI,EAAE,KAAKD,KAAL,CAAWC,IADE;AAEnBC,QAAAA,GAAG,EAAE,KAAKF,KAAL,CAAWE,GAFG;AAGnBC,QAAAA,KAAK,EAAE,KAAKH,KAAL,CAAWG,KAHC;AAInBC,QAAAA,IAAI,EAAE,KAAKJ,KAAL,CAAWI,IAJE;AAKnBC,QAAAA,gBAAgB,EAAE,KAAKL,KAAL,CAAWK,gBALV;AAMnBC,QAAAA,cAAc,EAAE,KAAKN,KAAL,CAAWM,cANR;AAOnBC,QAAAA,SAAS,EAAE,KAAKP,KAAL,CAAWO,SAPH;AAQnBE,QAAAA,UAAU,EAAE,KAAKT,KAAL,CAAWS;AARJ,OAArB;AAWA5B,MAAAA,cAAc,CAAC8D,aAAf,CACED,cADF,EAEE1B,IAFF,CAGEC,QAAQ,IAAI;AACV,aAAKC,QAAL,CAAc;AACZP,UAAAA,OAAO,EAAEM,QAAQ,CAACE,IAAT,CAAcR,OADX;AAEZD,UAAAA,UAAU,EAAE;AAFA,SAAd;AAID,OARH,EASEU,KAAK,IAAI;AACP,cAAMU,UAAU,GACbV,KAAK,CAACH,QAAN,IACCG,KAAK,CAACH,QAAN,CAAeE,IADhB,IAECC,KAAK,CAACH,QAAN,CAAeE,IAAf,CAAoBR,OAFtB,IAGAS,KAAK,CAACT,OAHN,IAIAS,KAAK,CAACW,QAAN,EALF;AAOA,aAAKb,QAAL,CAAc;AACZR,UAAAA,UAAU,EAAE,KADA;AAEZC,UAAAA,OAAO,EAAEmB;AAFG,SAAd;AAID,OArBH;AAuBA,WAAKzC,KAAL,CAAWuD,OAAX,CAAmBC,IAAnB,CAAwB,UAAxB;AACD;AACF;;AAEDC,EAAAA,MAAM,GAAG;AACP,wBACE;AAAK,MAAA,SAAS,EAAC,KAAf;AAAA,6BACE;AAAK,QAAA,SAAS,EAAC,MAAf;AAAsB,QAAA,KAAK,GAAE;AAACC,UAAAA,SAAS,EAAC;AAAX,WAAoB;AAACC,UAAAA,KAAK,EAAE;AAAR,SAAtB,CAA3B;AAAA,gCACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,eAEE,QAAC,IAAD;AACE,UAAA,QAAQ,EAAE,KAAK1D,aADjB;AAEE,UAAA,GAAG,EAAE2D,CAAC,IAAI;AACR,iBAAKZ,IAAL,GAAYY,CAAZ;AACD,WAJH;AAAA,qBAMG,CAAC,KAAKjD,KAAL,CAAWU,UAAZ,iBACC;AAAA,oCAEE;AAAK,cAAA,SAAS,EAAC,KAAf;AAAA,sCACE;AAAK,gBAAA,SAAS,EAAC,OAAf;AAAA,wCACI;AAAO,kBAAA,OAAO,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBADJ,eAEI;AACE,kBAAA,SAAS,EAAC,cADZ;AAEE,kBAAA,IAAI,EAAC,YAFP;AAGE,kBAAA,KAAK,EAAE,KAAKV,KAAL,CAAWS,UAHpB;AAIE,kBAAA,QAAQ,EAAE,KAAKV,gBAJjB;AAAA,4BAOI,KAAKC,KAAL,CAAWa,cAAX,CAA0BqC,GAA1B,CAA8BC,IAAI,IAAG;AACjC,wCACE;AAAsB,sBAAA,KAAK,EAAEA,IAAI,CAACC,EAAlC;AAAA,sCAAwCD,IAAI,CAAClD,IAA7C;AAAA,uBAAakD,IAAI,CAACC,EAAlB;AAAA;AAAA;AAAA;AAAA,4BADF;AAGH,mBAJD;AAPJ;AAAA;AAAA;AAAA;AAAA,wBAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,sBADF,eAmBE;AAAK,gBAAA,SAAS,EAAC,KAAf;AAAA,wCACE;AAAO,kBAAA,OAAO,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBADF,eAEE,QAAC,KAAD;AACE,kBAAA,IAAI,EAAC,MADP;AAEE,kBAAA,SAAS,EAAC,cAFZ;AAGE,kBAAA,IAAI,EAAC,MAHP;AAIE,kBAAA,KAAK,EAAE,KAAKpD,KAAL,CAAWC,IAJpB;AAKE,kBAAA,QAAQ,EAAE,KAAKT,YALjB;AAME,kBAAA,WAAW,EAAE,CAACT,QAAD,EAAWE,KAAX;AANf;AAAA;AAAA;AAAA;AAAA,wBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,sBAnBF;AAAA;AAAA;AAAA;AAAA;AAAA,oBAFF,eAmCE;AAAK,cAAA,SAAS,EAAC,YAAf;AAAA,sCACE;AAAO,gBAAA,OAAO,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADF,eAEE,QAAC,KAAD;AACE,gBAAA,IAAI,EAAC,MADP;AAEE,gBAAA,SAAS,EAAC,cAFZ;AAGE,gBAAA,IAAI,EAAC,KAHP;AAIE,gBAAA,KAAK,EAAE,KAAKe,KAAL,CAAWE,GAJpB;AAKE,gBAAA,QAAQ,EAAE,KAAKR;AALjB;AAAA;AAAA;AAAA;AAAA,sBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,oBAnCF,eA8CE;AAAK,cAAA,SAAS,EAAC,KAAf;AAAA,sCACE;AAAK,gBAAA,SAAS,EAAC,OAAf;AAAA,wCACE;AAAO,kBAAA,OAAO,EAAC,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBADF,eAEE,QAAC,KAAD;AACE,kBAAA,IAAI,EAAC,QADP;AAEE,kBAAA,SAAS,EAAC,cAFZ;AAGE,kBAAA,IAAI,EAAC,OAHP;AAIE,kBAAA,IAAI,EAAC,KAJP;AAKE,kBAAA,KAAK,EAAE,KAAKM,KAAL,CAAWG,KALpB;AAME,kBAAA,QAAQ,EAAE,KAAKV;AANjB;AAAA;AAAA;AAAA;AAAA,wBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,sBADF,eAaE;AAAK,gBAAA,SAAS,EAAC,OAAf;AAAA,wCACI;AAAO,kBAAA,OAAO,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBADJ,eAEI;AACE,kBAAA,SAAS,EAAC,cADZ;AAEE,kBAAA,IAAI,EAAC,MAFP;AAGE,kBAAA,KAAK,EAAE,KAAKO,KAAL,CAAWI,IAHpB;AAIE,kBAAA,QAAQ,EAAE,KAAKT,YAJjB;AAAA,4BAOI,KAAKK,KAAL,CAAWY,QAAX,CAAoBsC,GAApB,CAAwBC,IAAI,IAAG;AAC3B,wCACA;AAAA,iCAAoBA,IAApB;AAAA,uBAAaA,IAAb;AAAA;AAAA;AAAA;AAAA,4BADA;AAGH,mBAJD;AAPJ;AAAA;AAAA;AAAA;AAAA,wBAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,sBAbF;AAAA;AAAA;AAAA;AAAA;AAAA,oBA9CF,eAmGE;AAAK,cAAA,SAAS,EAAC,YAAf;AAAA,sCACI;AAAO,gBAAA,OAAO,EAAC,SAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADJ,eAEI,QAAC,KAAD;AACE,gBAAA,IAAI,EAAC,MADP;AAEE,gBAAA,IAAI,EAAC,SAFP;AAGE,gBAAA,MAAM,EAAC,SAHT;AAIE,gBAAA,QAAQ,EAAE,KAAKrD;AAJjB;AAAA;AAAA;AAAA;AAAA,sBAFJ,eAQI;AAAK,gBAAA,GAAG,EAAC,SAAT;AAAmB,gBAAA,GAAG,EACpB,KAAKE,KAAL,CAAWQ,iBAAX,KAAiC,IAAjC,GACA,8EADA,GACiF,KAAKR,KAAL,CAAWQ,iBAF9F;AAGI,gBAAA,MAAM,EAAC,OAHX;AAGmB,gBAAA,KAAK,EAAC;AAHzB;AAAA;AAAA;AAAA;AAAA,sBARJ;AAAA;AAAA;AAAA;AAAA;AAAA,oBAnGF,eAiHE;AAAK,cAAA,SAAS,EAAC,YAAf;AAAA,qCACE;AAAQ,gBAAA,SAAS,EAAC,2BAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,oBAjHF;AAAA;AAAA;AAAA;AAAA;AAAA,kBAPJ,EA8HG,KAAKR,KAAL,CAAWW,OAAX,iBACC;AAAK,YAAA,SAAS,EAAC,YAAf;AAAA,mCACE;AACE,cAAA,SAAS,EACP,KAAKX,KAAL,CAAWU,UAAX,GACI,qBADJ,GAEI,oBAJR;AAME,cAAA,IAAI,EAAC,OANP;AAAA,wBAQG,KAAKV,KAAL,CAAWW;AARd;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,kBA/HJ,eA4IE,QAAC,WAAD;AACE,YAAA,KAAK,EAAE;AAAE0C,cAAAA,OAAO,EAAE;AAAX,aADT;AAEE,YAAA,GAAG,EAAEJ,CAAC,IAAI;AACR,mBAAKV,QAAL,GAAgBU,CAAhB;AACD;AAJH;AAAA;AAAA;AAAA;AAAA,kBA5IF;AAAA;AAAA;AAAA;AAAA;AAAA,gBAFF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,YADF;AA0JD;;AAhU+C","sourcesContent":["import React, { Component } from \"react\";\r\nimport Form from \"react-validation/build/form\";\r\nimport Input from \"react-validation/build/input\";\r\nimport CheckButton from \"react-validation/build/button\";\r\n\r\nimport ProductService from \"../../services/product.service\";\r\nimport CategoryService from \"../../services/category.service\";\r\n\r\nconst required = value => {\r\n  if (!value) {\r\n    return (\r\n      <div className=\"alert alert-danger\" role=\"alert\">\r\n        This field is required!\r\n      </div>\r\n    );\r\n  }\r\n};\r\n\r\nconst vname = value => {\r\n  if (value.length < 3) {\r\n    return (\r\n      <div className=\"alert alert-danger\" role=\"alert\">\r\n        The name must be longer than 3 characters.\r\n      </div>\r\n    );\r\n  }\r\n};\r\n\r\nexport default class NewProduct extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.handleProduct = this.handleProduct.bind(this);\r\n    this.onChangeName = this.onChangeName.bind(this);\r\n    this.onChangePrice = this.onChangePrice.bind(this);\r\n    this.onChangeSku = this.onChangeSku.bind(this);\r\n    this.onChangeUnit = this.onChangeUnit.bind(this);\r\n    this.onChangeShowOnHomepage = this.onChangeShowOnHomepage.bind(this);\r\n    this.onChangeEnteredPrice = this.onChangeEnteredPrice.bind(this);\r\n    this.onChangePicture = this.onChangePicture.bind(this);\r\n    this.onChangeCategory = this.onChangeCategory.bind(this);\r\n\r\n    this.state = {\r\n      name: \"\",\r\n      sku: \"\",\r\n      price: \"0\",\r\n      unit: \"ITEM\",\r\n      isShowOnHomepage: false,\r\n      isEnteredPrice: false,\r\n      pictureId: null,\r\n      picturePreviewUrl: null,\r\n      categoryId: null,\r\n      successful: false,\r\n      message: \"\",\r\n      listUnit: [\"ITEM\", \"PIECE\", \"SET\", \"KG\"],\r\n      listCategories: []\r\n    };\r\n  }\r\n\r\n  componentDidMount(){\r\n    CategoryService.getListParent(-1).then(\r\n      response => {\r\n        this.setState({\r\n          listCategories: response.data\r\n        });\r\n      },\r\n      error => {}\r\n    );\r\n  }\r\n\r\n  onChangeName(e) {\r\n    this.setState({\r\n      name: e.target.value\r\n    });\r\n  }\r\n\r\n  onChangePrice(e) {\r\n    this.setState({\r\n      price: e.target.value\r\n    });\r\n  }\r\n\r\n  onChangeSku(e) {\r\n    this.setState({\r\n      sku: e.target.value\r\n    });\r\n  }\r\n\r\n  onChangeUnit(e){\r\n      this.setState({\r\n          unit: e.target.value\r\n      });\r\n  }\r\n\r\n  onChangeShowOnHomepage(){\r\n    this.setState({\r\n        isShowOnHomepage: !this.state.isShowOnHomepage\r\n    });\r\n  }\r\n\r\n  onChangeEnteredPrice(){\r\n    this.setState({\r\n        isEnteredPrice: !this.state.isEnteredPrice\r\n    });\r\n  }\r\n\r\n  onChangeCategory(e)\r\n  {\r\n    this.setState({\r\n      categoryId: e.target.value\r\n    });\r\n  }\r\n\r\n  onChangePicture(e){\r\n    e.preventDefault();\r\n    const formData = new FormData();\r\n    formData.append('file', e.target.files[0]);\r\n    ProductService.uploadPicture(\r\n      formData\r\n      ).then(\r\n      response => {\r\n        this.setState({\r\n          pictureId: response.data\r\n        });\r\n        alert(\"Picture uploaded successfully!\");\r\n      },\r\n      error => {\r\n        const resMessage =\r\n          (error.response &&\r\n            error.response.data &&\r\n            error.response.data.message) ||\r\n          error.message ||\r\n          error.toString();\r\n        alert(resMessage);\r\n      }\r\n    );\r\n    const reader = new FileReader();\r\n    reader.readAsDataURL(e.target.files[0]);\r\n    reader.onload = () =>{\r\n        this.setState({\r\n        picturePreviewUrl: reader.result\r\n      });\r\n    }\r\n  }\r\n\r\n  handleProduct(e) {\r\n    e.preventDefault();\r\n\r\n    this.setState({\r\n      message: \"\",\r\n      successful: false\r\n    });\r\n\r\n    this.form.validateAll();\r\n\r\n    if (this.checkBtn.context._errors.length === 0) {\r\n      let productRequest = {\r\n        name: this.state.name,\r\n        sku: this.state.sku,\r\n        price: this.state.price,\r\n        unit: this.state.unit,\r\n        isShowOnHomepage: this.state.isShowOnHomepage, \r\n        isEnteredPrice: this.state.isEnteredPrice,\r\n        pictureId: this.state.pictureId,\r\n        categoryId: this.state.categoryId\r\n      };\r\n\r\n      ProductService.addNewProduct(\r\n        productRequest\r\n      ).then(\r\n        response => {\r\n          this.setState({\r\n            message: response.data.message,\r\n            successful: true\r\n          });\r\n        },\r\n        error => {\r\n          const resMessage =\r\n            (error.response &&\r\n              error.response.data &&\r\n              error.response.data.message) ||\r\n            error.message ||\r\n            error.toString();\r\n\r\n          this.setState({\r\n            successful: false,\r\n            message: resMessage\r\n          });\r\n        }\r\n      );\r\n      this.props.history.push('/product');\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"row\">\r\n        <div className=\"card\" style={{marginTop:\"70px\"}, {width: \"30rem\"}}>\r\n          <h3>New Product</h3>\r\n          <Form\r\n            onSubmit={this.handleProduct}\r\n            ref={c => {\r\n              this.form = c;\r\n            }}\r\n          >\r\n            {!this.state.successful && (\r\n              <div>\r\n\r\n                <div className=\"row\">\r\n                  <div className=\"col-6\">\r\n                      <label htmlFor=\"categoryId\">Category</label>\r\n                      <select\r\n                        className=\"form-control\"\r\n                        name=\"categoryId\"\r\n                        value={this.state.categoryId}\r\n                        onChange={this.onChangeCategory}\r\n                        >\r\n                      {\r\n                          this.state.listCategories.map(item =>{\r\n                              return (\r\n                                <option key={item.id} value={item.id}> {item.name} </option>\r\n                              )\r\n                          })\r\n                      }\r\n                      </select>\r\n                  </div>\r\n\r\n                  <div className=\"col\">\r\n                    <label htmlFor=\"name\">Product Name</label>\r\n                    <Input\r\n                      type=\"text\"\r\n                      className=\"form-control\"\r\n                      name=\"name\"\r\n                      value={this.state.name}\r\n                      onChange={this.onChangeName}\r\n                      validations={[required, vname]}\r\n                    />\r\n                  </div>\r\n                </div>\r\n                \r\n\r\n                <div className=\"form-group\">\r\n                  <label htmlFor=\"sku\">SKU</label>\r\n                  <Input\r\n                    type=\"text\"\r\n                    className=\"form-control\"\r\n                    name=\"sku\"\r\n                    value={this.state.sku}\r\n                    onChange={this.onChangeSku}\r\n                  />\r\n                </div>\r\n                \r\n                <div className=\"row\">\r\n                  <div className=\"col-6\">\r\n                    <label htmlFor=\"price\">Price</label>\r\n                    <Input\r\n                      type=\"number\"\r\n                      className=\"form-control\"\r\n                      name=\"price\"\r\n                      step=\".01\"\r\n                      value={this.state.price}\r\n                      onChange={this.onChangePrice}\r\n                    />\r\n                  </div>\r\n                  \r\n                  <div className=\"col-6\">\r\n                      <label htmlFor=\"unit\">Unit</label>\r\n                      <select\r\n                        className=\"form-control\"\r\n                        name=\"unit\"\r\n                        value={this.state.unit}\r\n                        onChange={this.onChangeUnit}\r\n                        >\r\n                      {\r\n                          this.state.listUnit.map(item =>{\r\n                              return (\r\n                              <option key={item}>{item} </option>\r\n                              )\r\n                          })\r\n                      }\r\n                      </select>\r\n                  </div>\r\n                </div>\r\n                \r\n\r\n                {/* <div className=\"form-group\">\r\n                    <label htmlFor=\"isShowOnHomepage\">Show On Homepage</label>\r\n                    <Input\r\n                      type=\"checkbox\"\r\n                      name=\"isShowOnHomepage\"\r\n                      value={this.state.isShowOnHomepage}\r\n                      onChange={this.onChangeShowOnHomepage}\r\n                    />\r\n                </div>\r\n                \r\n                <div className=\"form-group\">\r\n                    <label htmlFor=\"isEnteredPrice\">Allow Enter Price</label>\r\n                    <Input\r\n                      type=\"checkbox\"\r\n                      name=\"isEnteredPrice\"\r\n                      value={this.state.isEnteredPrice}\r\n                      onChange={this.onChangeEnteredPrice}\r\n                    />\r\n                </div> */}\r\n\r\n                <div className=\"form-group\">\r\n                    <label htmlFor=\"picture\">Picture</label>\r\n                    <Input\r\n                      type=\"file\"\r\n                      name=\"picture\"\r\n                      accept=\"image/*\"\r\n                      onChange={this.onChangePicture}\r\n                    />                                        \r\n                    <img alt=\"preview\" src={\r\n                      this.state.picturePreviewUrl === null ? \r\n                      \"https://www.amerikickkansas.com/wp-content/uploads/2017/04/default-image.jpg\" : this.state.picturePreviewUrl\r\n                      } height=\"200px\" width=\"200px\"/>\r\n                </div>\r\n\r\n                <div className=\"form-group\">\r\n                  <button className=\"btn btn-primary btn-block\">Add New Product</button>\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {this.state.message && (\r\n              <div className=\"form-group\">\r\n                <div\r\n                  className={\r\n                    this.state.successful\r\n                      ? \"alert alert-success\"\r\n                      : \"alert alert-danger\"\r\n                  }\r\n                  role=\"alert\"\r\n                >\r\n                  {this.state.message}\r\n                </div>\r\n              </div>\r\n            )}\r\n            <CheckButton\r\n              style={{ display: \"none\" }}\r\n              ref={c => {\r\n                this.checkBtn = c;\r\n              }}\r\n            />\r\n          </Form>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}